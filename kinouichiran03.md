```uml

@startuml
opt 未登録
ユーザー -> webサーバー : ユーザー登録
webサーバー -> DBサーバー : ユーザー登録
DBサーバー -> DBサーバー : 登録処理
DBサーバー -> webサーバー : 登録結果

alt 登録成功
webサーバー -> ユーザー : 成功メッセージを表示
else 登録失敗
webサーバー -> ユーザー : 失敗メッセージを表示

end
end


ユーザー -> webサーバー : ログイン
webサーバー -> DBサーバー : ログイン照会
DBサーバー -> DBサーバー : ログイン処理
DBサーバー -> webサーバー : 認証結果
activate ユーザー
alt 認証成功
webサーバー -> ユーザー : ユーザー名を表示
else 認証失敗
webサーバー -> ユーザー : 失敗メッセージを表示
end

ユーザー -> webサーバー : 商品検索
webサーバー -> DBサーバー : 商品検索
DBサーバー -> DBサーバー : 商品情報出力
DBサーバー -> webサーバー : 商品情報出力
alt 登録成功
webサーバー -> ユーザー : 商品情報を表示
else 登録失敗
webサーバー -> ユーザー : 空欄
end

ユーザー -> webサーバー : 商品一覧
webサーバー -> DBサーバー : 商品一覧
DBサーバー -> DBサーバー : 商品一覧
DBサーバー -> webサーバー : 商品一覧
webサーバー -> ユーザー : 商品一覧ページを表示

ユーザー -> webサーバー : 商品詳細
webサーバー -> DBサーバー : 商品詳細
DBサーバー -> DBサーバー : 商品詳細
DBサーバー -> webサーバー : 商品詳細
webサーバー -> ユーザー : 商品詳細ページを表示

ユーザー -> webサーバー : カートに入れる
webサーバー -> DBサーバー : カートに入れる
DBサーバー -> DBサーバー : カートに入れる
DBサーバー -> webサーバー : カートの中に出力
alt ログイン中
webサーバー -> ユーザー : カートの中に商品を表示
else ログアウト中
webサーバー -> ユーザー : 商品情報とメッセージを表示
end

ユーザー -> webサーバー : 登録情報
webサーバー -> DBサーバー : 登録情報
DBサーバー -> DBサーバー : 登録情報を出力
DBサーバー -> webサーバー : 登録情報を出力
alt 空欄なし
webサーバー -> ユーザー : 登録情報が表示されない
else 空欄あり
webサーバー -> ユーザー : 登録情報が表示される
end

opt ログイン中
ユーザー -> webサーバー : ログアウト
webサーバー -> DBサーバー : ログアウト照会
DBサーバー -> DBサーバー : ログアウト処理
DBサーバー -> webサーバー : ログアウト結果
webサーバー -> ユーザー : ログアウト結果
end

deactivate ユーザー
@enduml

```
